# ============================================
# Backend Environment Variables Template
# ============================================
# Copy this file to .env and fill in your values
# cp .env.template .env

# ============================================
# REQUIRED - Database Configuration
# ============================================
DATABASE_URL="postgresql://user:password@localhost:5432/dbname"

# ============================================
# REQUIRED - JWT Configuration
# ============================================
# Secret key for signing JWT tokens
# ⚠️ MUST be changed in production! Use a strong, random string (min 32 characters)
JWT_SECRET="your-secret-key-here-change-in-production"

# ============================================
# OPTIONAL - Server Configuration
# ============================================
# Port number for the Express server
PORT=3000

# Node environment (development, production, staging)
NODE_ENV="development"

# ============================================
# OPTIONAL - Token Configuration
# ============================================
# Refresh token expiry in days
# Default: 400 days
# Must be longer than INACTIVITY_LOGOUT_DAYS
REFRESH_TOKEN_DAYS=400

# Inactivity logout period in days
# Default: 365 days (1 year)
# Users will be logged out if inactive for this period
# Must be shorter than REFRESH_TOKEN_DAYS
INACTIVITY_LOGOUT_DAYS=365

# Access token expiry duration
# Default: 15m (15 minutes)
ACCESS_TOKEN_EXPIRES_IN=15m

# ============================================
# OPTIONAL - Logging Configuration
# ============================================
# Log level: debug, info, warn, error
# Default: "debug" in development, "info" in production
LOG_LEVEL="debug"

# ============================================
# REQUIRED - Auth0 Configuration (Free Tier Compatible)
# ============================================
# Auth0 is used for Google OAuth and Email/Password authentication
# Get these values from your Auth0 Dashboard: https://manage.auth0.com/
#
# FREE TIER SETUP (Recommended):
# - Only AUTH0_DOMAIN is required for token verification
# - Frontend handles all authentication (signup, login, Google OAuth)
# - Backend only verifies Auth0 access tokens
#
# ADVANCED SETUP (Optional - requires M2M application):
# - Add AUTH0_M2M_CLIENT_ID and AUTH0_M2M_CLIENT_SECRET for backend user operations
# - Allows backend to create/update users in Auth0

# REQUIRED: Your Auth0 domain (e.g., your-tenant.auth0.com)
AUTH0_DOMAIN="your-tenant.auth0.com"

# OPTIONAL: Regular Web Application (for password grant in backend)
# Only needed if you want backend to handle email/password login directly
# Create a Regular Web Application in Auth0 Dashboard
AUTH0_CLIENT_ID="your-regular-web-app-client-id"
AUTH0_CLIENT_SECRET="your-regular-web-app-client-secret"

# OPTIONAL: Machine-to-Machine Application (for Management API)
# Only needed for backend user creation/updates (e.g., setupPassword endpoint)
# Create a Machine-to-Machine application in Auth0 Dashboard
# Grant it access to "Auth0 Management API" with permissions:
# - read:users, create:users, update:users, update:users_app_metadata
AUTH0_M2M_CLIENT_ID="your-m2m-app-client-id"
AUTH0_M2M_CLIENT_SECRET="your-m2m-app-client-secret"
AUTH0_AUDIENCE="https://your-tenant.auth0.com/api/v2/"

# Connection names (optional, defaults shown)
# These are the connection names configured in Auth0 Dashboard
AUTH0_CONNECTION_GOOGLE="google-oauth2"
AUTH0_CONNECTION_EMAIL="Username-Password-Authentication"

# ============================================
# OPTIONAL - Firebase Configuration (Legacy, for migration period)
# ============================================
# You can use either Method 1 (individual variables) OR Method 2 (service account JSON)
# If neither is configured, legacy Firebase login will fail

# Method 1: Individual Variables
# FIREBASE_PROJECT_ID="your-firebase-project-id"
# FIREBASE_CLIENT_EMAIL="firebase-adminsdk@your-project.iam.gserviceaccount.com"
# FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"

# Method 2: Service Account JSON (alternative to Method 1)
# FIREBASE_SERVICE_ACCOUNT='{"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}'

# ============================================
# OPTIONAL - CORS Configuration
# ============================================
# Comma-separated list of allowed origins for CORS
# Currently commented out in code - uncomment in index.ts to use
# ALLOWED_ORIGINS="http://localhost:5173,https://yourdomain.com"
